<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scientific Calculator</title>
<style>
:root {
--primary-color: #2c3e50;
--secondary-color: #3498db;
--background-color: #ecf0f1;
--text-color: #2c3e50;
}

* {
box-sizing: border-box;
font-family: 'Arial', sans-serif;
}

body {
display: flex;
flex-direction: column;
align-items: center;
background-color: #bdc3c7;
margin: 0;
min-height: 100vh;
}

.calculator {
background-color: var(--background-color);
border-radius: 15px;
box-shadow: 0 0 20px rgba(0,0,0,0.2);
padding: 20px;
margin: 20px;
width: 100%;
max-width: 400px;
}

.display {
background-color: white;
padding: 20px;
border-radius: 10px;
margin-bottom: 20px;
text-align: right;
font-size: 2em;
min-height: 80px;
word-wrap: break-word;
}

.buttons {
display: grid;
grid-template-columns: repeat(5, 1fr);
gap: 10px;
}

button {
padding: 15px;
border: none;
border-radius: 8px;
font-size: 1.2em;
cursor: pointer;
background-color: var(--primary-color);
color: white;
transition: all 0.2s;
}

button:hover {
opacity: 0.8;
}

.operator {
background-color: var(--secondary-color);
}

.scientific {
display: none;
}

.show-scientific .scientific {
display: block;
}

.theme-selector {
margin: 20px;
display: flex;
gap: 10px;
}

.theme-btn {
width: 30px;
height: 30px;
border-radius: 50%;
cursor: pointer;
border: 2px solid white;
}

.history-panel {
background-color: white;
padding: 20px;
border-radius: 10px;
margin: 20px;
max-width: 400px;
width: 100%;
}

.high-contrast {
--background-color: #000;
--text-color: #fff;
--primary-color: #333;
--secondary-color: #666;
}

@media (max-width: 480px) {
.buttons {
grid-template-columns: repeat(4, 1fr);
}
.scientific {
grid-column: span 2;
}
}
</style>
</head>
<body>
<div class="theme-selector">
<div class="theme-btn" style="background: #ecf0f1" onclick="setTheme('light')"></div>
<div class="theme-btn" style="background: #2c3e50" onclick="setTheme('dark')"></div>
<div class="theme-btn" style="background: #e74c3c" onclick="setTheme('high-contrast')"></div>
</div>

<div class="calculator">
<div class="display" id="display">0</div>
<div class="buttons">
<!-- Scientific Functions -->
<button class="scientific" onclick="calculateScientific('sin')">sin</button>
<button class="scientific" onclick="calculateScientific('cos')">cos</button>
<button class="scientific" onclick="calculateScientific('tan')">tan</button>
<button class="scientific" onclick="calculateScientific('log')">log</button>
<button class="scientific" onclick="calculateScientific('exp')">e^x</button>

<!-- Memory Functions -->
<button onclick="memoryClear()">MC</button>
<button onclick="memoryRecall()">MR</button>
<button onclick="memoryAdd()">M+</button>
<button onclick="memorySubtract()">M-</button>
<button onclick="clearEntry()">CE</button>

<!-- Basic Operations -->
<button onclick="clearAll()">C</button>
<button onclick="backspace()">⌫</button>
<button class="operator" onclick="appendOperator('%')">%</button>
<button class="operator" onclick="appendOperator('/')">/</button>

<!-- Numbers -->
<button onclick="appendNumber('7')">7</button>
<button onclick="appendNumber('8')">8</button>
<button onclick="appendNumber('9')">9</button>
<button class="operator" onclick="appendOperator('*')">×</button>

<button onclick="appendNumber('4')">4</button>
<button onclick="appendNumber('5')">5</button>
<button onclick="appendNumber('6')">6</button>
<button class="operator" onclick="appendOperator('-')">-</button>

<button onclick="appendNumber('1')">1</button>
<button onclick="appendNumber('2')">2</button>
<button onclick="appendNumber('3')">3</button>
<button class="operator" onclick="appendOperator('+')">+</button>

<button onclick="toggleScientific()">SCI</button>
<button onclick="appendNumber('0')">0</button>
<button onclick="appendNumber('.')">.</button>
<button class="operator" onclick="calculateResult()">=</button>
</div>
</div>

<div class="history-panel">
<h3>History</h3>
<div id="history"></div>
</div>

<script>
let currentInput = '0';
let previousInput = '';
let operation = null;
let memory = 0;
let history = [];
let isScientificMode = false;

function updateDisplay() {
const display = document.getElementById('display');
display.textContent = currentInput;
}

function appendNumber(num) {
if (currentInput === '0' && num !== '.') {
currentInput = num;
} else {
currentInput += num;
}
updateDisplay();
}

function appendOperator(op) {
previousInput = currentInput;
currentInput = '';
operation = op;
updateDisplay();
}

function calculateResult() {
let result;
const prev = parseFloat(previousInput);
const current = parseFloat(currentInput);

switch(operation) {
case '+': result = prev + current; break;
case '-': result = prev - current; break;
case '*': result = prev * current; break;
case '/': result = prev / current; break;
case '%': result = prev % current; break;
}

history.push(`${previousInput} ${operation} ${currentInput} = ${result}`);
updateHistory();
currentInput = result.toString();
operation = null;
previousInput = '';
updateDisplay();
}

function calculateScientific(func) {
const value = parseFloat(currentInput);
switch(func) {
case 'sin': result = Math.sin(value); break;
case 'cos': result = Math.cos(value); break;
case 'tan': result = Math.tan(value); break;
case 'log': result = Math.log10(value); break;
case 'exp': result = Math.exp(value); break;
}
currentInput = result.toString();
updateDisplay();
}

function memoryClear() { memory = 0; }
function memoryRecall() { currentInput = memory.toString(); updateDisplay(); }
function memoryAdd() { memory += parseFloat(currentInput); }
function memorySubtract() { memory -= parseFloat(currentInput); }

function clearAll() {
currentInput = '0';
previousInput = '';
operation = null;
updateDisplay();
}

function clearEntry() {
currentInput = '0';
updateDisplay();
}

function backspace() {
currentInput = currentInput.slice(0, -1);
if (currentInput === '') currentInput = '0';
updateDisplay();
}

function toggleScientific() {
document.querySelector('.calculator').classList.toggle('show-scientific');
isScientificMode = !isScientificMode;
}

function updateHistory() {
const historyElement = document.getElementById('history');
historyElement.innerHTML = history.slice(-5).reverse().join('<br>');
}

function setTheme(theme) {
document.body.className = theme;
if (theme === 'high-contrast') {
document.documentElement.style.setProperty('--background-color', '#000');
document.documentElement.style.setProperty('--text-color', '#fff');
} else if (theme === 'dark') {
document.documentElement.style.setProperty('--background-color', '#2c3e50');
document.documentElement.style.setProperty('--text-color', '#ecf0f1');
} else {
document.documentElement.style.setProperty('--background-color', '#ecf0f1');
document.documentElement.style.setProperty('--text-color', '#2c3e50');
}
}

// Keyboard support
document.addEventListener('keydown', (e) => {
if (e.key >= '0' && e.key <= '9' || e.key === '.') appendNumber(e.key);
if (['+', '-', '*', '/'].includes(e.key)) appendOperator(e.key);
if (e.key === 'Enter') calculateResult();
if (e.key === 'Backspace') backspace();
if (e.key === 'Escape') clearAll();
});
</script>
</body>
</html>
